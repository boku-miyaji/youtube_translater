# Commit Summary - Issue #21 (追加修正)
**Date**: 2025-10-24 15:07:08
**Commit**: d4b3988

## 問題の説明
PDF分析時にチャットの質問例が動画に関する内容（「動画で説明されていた」「動画で言っていた」等）になっており、PDFには不適切な表現だった。

## 修正内容

### 1. ChatInterfaceコンポーネントの拡張

#### 新しいプロパティ
- **contentType**: コンテンツタイプを指定 (`youtube` | `pdf` | `audio` | `video`)
- デフォルト値: `youtube`（後方互換性）

#### コンテンツラベルのマッピング
```typescript
pdf:     { source: '文書' }
audio:   { source: '音声' }
video:   { source: '動画' }
youtube: { source: '動画' }
```

### 2. 質問生成ロジックの改善

#### 変更前
- すべての質問で「動画」という単語を使用
- 例: 「動画で説明されていた〜」

#### 変更後
- コンテンツタイプに応じた適切な表現を使用
- PDF: 「文書で記載されていた〜」
- Audio: 「音声で説明されていた〜」
- Video: 「動画で説明されていた〜」

### 3. 質問テンプレートの修正例

| 質問タイプ | 変更前 | 変更後（PDF） |
|-----------|--------|--------------|
| 概念の説明 | 「XXXについて、**動画**で説明されていた内容を...」 | 「XXXについて、**文書**で説明されていた内容を...」 |
| 数値の説明 | 「**動画**で言及されていた「XXX」について...」 | 「**文書**で言及されていた「XXX」について...」 |
| 手法の説明 | 「**動画**で紹介されていた「XXX」について...」 | 「**文書**で紹介されていた「XXX」について...」 |
| 引用の意味 | 「**動画**で「XXX」と言っていたのは...」 | 「**文書**で「XXX」と記載されていたのは...」 |

### 4. エラーメッセージの改善

#### 変更前
```
まず動画をアップロードして文字起こしを生成してから質問してください。
```

#### 変更後（PDF）
```
まずPDFをアップロードして分析を実行してから質問してください。
```

### 5. AnalyzePageの更新

ChatInterfaceに`contentType`プロップを渡すように更新:
```typescript
<ChatInterface
  ...
  contentType={currentVideo.analysisType || 'youtube'}
/>
```

## 技術的な詳細

### 変更されたファイル
1. **src/components/shared/ChatInterface.tsx** (+43/-23)
   - `contentType`プロップの追加
   - `getContentLabel()`関数の追加
   - 質問生成ロジックの更新（9箇所）
   - エラーメッセージの条件分岐

2. **src/components/pages/AnalyzePage.tsx** (+5/-2)
   - ChatInterfaceへの`contentType`プロップの追加

## ユーザーへの影響

✅ **改善点**:
- PDFの質問例が文書に関する適切な表現に
- 音声ファイルの質問例も音声に適した表現に
- より自然で適切なユーザー体験

## 後方互換性
- デフォルト値が`youtube`のため、既存の動作は変更なし
- 新しいプロップはオプショナル

## テスト結果
- ビルド成功 ✓
- TypeScript型チェック OK ✓
