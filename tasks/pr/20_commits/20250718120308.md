# Issue #20 追加実装: PDF/YouTube別プロンプト設定

## 実装内容
論文の要約を作成する際に、YouTube用の要約プロンプトが使用されていた問題を修正し、コンテンツタイプ（YouTube、PDF、音声）ごとに異なるプロンプトを使用できるようにしました。

## 主な変更点

### 1. サーバー側の変更 (src/server.ts)
- **generatePDFSummary関数の削除**: ハードコードされたプロンプトを使用していた`generatePDFSummary`関数を削除
- **generateSummary関数の拡張**: 
  - `contentType`パラメータを追加して、YouTube/PDF/Audioを識別
  - prompts.jsonから各コンテンツタイプ用のプロンプトを読み込む処理を実装
  - PDFメタデータ（著者、ページ数など）を適切に処理できるように修正
- **/api/pdf-analyzeエンドポイントの修正**: 
  - `generatePDFSummary`の代わりに`generateSummary`を使用
  - PDFメタデータを`generateSummary`に渡す際の形式を調整
- **型エラーの修正**: 音声ファイルのformatフィールドに関する型エラーを修正

### 2. プロンプト構造の変更 (prompts.json)
- **構造の階層化**: 
  ```json
  {
    "summarize": {
      "youtube": { "name": "...", "template": "..." },
      "pdf": { "name": "...", "template": "..." },
      "audio": { "name": "...", "template": "..." }
    }
  }
  ```
- **PDF専用プロンプト**: 学術論文向けの構造化された要約プロンプトを追加
- **音声専用プロンプト**: 音声コンテンツ向けのプロンプトを追加

### 3. 設定画面の改善 (src/components/pages/SettingsPage.tsx)
- **タブ構造の実装**: 要約/記事/チャットのメインタブ
- **サブタブの追加**: 要約タブ内でYouTube/PDF/音声を切り替えられるサブタブ
- **プロンプト編集機能**: 各コンテンツタイプのプロンプトを個別に編集可能
- **デフォルトプロンプトの定義**: 各コンテンツタイプ用のデフォルトプロンプトを用意

## 技術的な詳細

### プロンプトテンプレートの変数
- **共通**: `{{title}}`, `{{transcriptContent}}`
- **YouTube**: `{{duration}}`, `{{channel}}`, `{{timestampNote}}`
- **PDF**: `{{authors}}`, `{{pageCount}}`, `{{language}}`
- **音声**: `{{duration}}`, `{{format}}`, `{{timestampNote}}`

### 後方互換性
- 旧形式のprompts.json（`summary.template`）も読み込み可能
- デフォルトプロンプトへのフォールバック機能

## ユーザーへの影響
- PDFの要約がより学術的で構造化された形式で生成される
- 設定画面から各コンテンツタイプのプロンプトを自由にカスタマイズ可能
- 既存の動作への影響なし（後方互換性維持）