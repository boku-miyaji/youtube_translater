# PDF処理時間予測と表示の改善

## 修正内容

### 問題点
1. PDF分析の予測時間が0秒と表示される
2. 固定の文字数（50,000文字）を使用していて実態とかけ離れている
3. PDFページ数を考慮していない

### 対応内容

#### 1. PDFコスト見積もりエンドポイント追加
- `/api/estimate-cost-pdf` エンドポイントを新規作成
- ページ数ベースの処理時間予測を実装
- 1ページあたり1.5秒（抽出）+ 12秒（要約）の現実的な計算

#### 2. フロントエンド予測ロジック改善
- 固定文字数50,000から、ページ数ベース（10ページ×4000文字）に変更
- timePredictor.tsでページ数優先の予測計算を実装
- PredictionInputインターフェースにpageCountフィールド追加

#### 3. サーバー側レスポンス拡張
- PDF分析レスポンスにcontentMetricsを追加
  - pageCount: 実際のページ数
  - characterCount: 実際の文字数
  - wordCount: 実際の単語数
- より正確な履歴データの収集が可能

#### 4. 処理時間表示の改善
- ページ数がある場合は「s/page」表示
- 文字数のみの場合は「s/1k chars」表示
- より直感的なレート表示

#### 5. テストコード追加
- timePredictor.test.ts: ページベース予測のテスト
- pdf-cost-estimation.test.ts: APIエンドポイントのテスト

## 効果
- PDF処理時間予測が現実的な値になる（0秒→10-20秒程度）
- ページ数に応じた正確な時間予測
- 履歴データの蓄積により予測精度が向上
- ユーザーに適切な待機時間の目安を提供